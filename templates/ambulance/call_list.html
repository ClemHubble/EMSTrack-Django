{% extends "base.html" %}
{% load static %}
{% load i18n %}

{% block content %}

<div class="container">

    <div class="row">
        <div class="mt-3 col-sm-4">

            <div class="row">


                <button class="btn btn-danger float-left ml-1" type="button" data-toggle="collapse"
                        data-target="#collapseCallGuide" aria-expanded="false"
                        aria-controls="collapseExample"> Calls
                    <i class="fas fa-question"></i>
                </button>

            </div>

            <div class="row">

                <div class="collapse" id="collapseCallGuide">
                    <div class="mt-3 card card-body border border-info">

                            {% trans "Sample documentation preview for calls go here.
                            Sample text, sample documentation preview for calls go here.
                            sample documentation preview for calls go here. sample documentation preview for calls go
                            here. " %}

                    </div>
                </div>

            </div>

        </div>

        <div class="col-sm-8">

            <div class="row">
                <div class="col">


                    <h1 class="mt-3">{% trans "Calls" %}</h1>


                    <div class="accordion" id="accordionExample">
                        <div class="card">
                            <div class="card-header" id="headingOne">
                                <h2 class="mb-0">
                                    <button class="btn btn-link" type="button" data-toggle="collapse"
                                            data-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                       <h2>{% trans "Pending" %}</h2>
                                    </button>
                                </h2>
                            </div>

                            <div id="collapseOne" class="collapse show" aria-labelledby="headingOne"
                                 data-parent="#accordionExample">
                                <div class="card-body">
                                    {% if pending_list %}

                    <table class="table table-striped table-sm">
                        <thead>
                        <tr>
                            <th>{% trans "Time" %}</th>
                            <th>{% trans "Details" %}</th>
                            <th>{% trans "Priority" %}</th>
                            <th>{% trans "Priority Code" %}</th>
                            <th>{% trans "Radio Code" %}</th>
                            <th>{% trans "Ambulances" %}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for call in pending_list %}
                        <tr>
                            <td><a href="{% url 'ambulance:call_detail' pk=call.id %}">{{ call.pending_at }}</a></td>
                            <td>{{ call.details }}</td>
                            <td>{{ call.priority }}</td>
                            <td>
                                {% if call.priority_code %}
                                {{ call.priority_code.prefix.id }}-{{ call.priority_code.priority }}-{{
                                call.priority_code.suffix }}
                                {% endif %}
                            </td>
                            <td>{{ call.radio_code.id }}</td>
                            <td>{{ call.get_ambulances }}</td>
                        </tr>

                        {% endfor %}
                        </tbody>
                    </table>

                    {% else %}

                    <p>
                        {% trans "No calls currently pending." %}
                    </p>

                    {% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" id="headingTwo">
                                <h2 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                            data-target="#collapseTwo" aria-expanded="false"
                                            aria-controls="collapseTwo">
                                    #2
                                    </button>
                                </h2>
                            </div>
                            <div id="collapseTwo" class="collapse" aria-labelledby="headingTwo"
                                 data-parent="#accordionExample">
                                <div class="card-body">

                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-header" id="headingThree">
                                <h2 class="mb-0">
                                    <button class="btn btn-link collapsed" type="button" data-toggle="collapse"
                                            data-target="#collapseThree" aria-expanded="false"
                                            aria-controls="collapseThree">
                                       #3
                                    </button>
                                </h2>
                            </div>
                            <div id="collapseThree" class="collapse" aria-labelledby="headingThree"
                                 data-parent="#accordionExample">
                                <div class="card-body">

                                </div>
                            </div>
                        </div>
                    </div>






                    <h2>{% trans "Started" %}</h2>

                    {% if started_list %}

                    <table class="table table-striped table-sm">
                        <thead>
                        <tr>
                            <th>{% trans "Time" %}</th>
                            <th>{% trans "Details" %}</th>
                            <th>{% trans "Priority" %}</th>
                            <th>{% trans "Priority Code" %}</th>
                            <th>{% trans "Radio Code" %}</th>
                            <th>{% trans "Ambulances" %}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for call in started_list %}
                        <tr>
                            <td><a href="{% url 'ambulance:call_detail' pk=call.id %}">{{ call.started_at }}</a></td>
                            <td>{{ call.details }}</td>
                            <td>{{ call.priority }}</td>
                            <td>
                                {% if call.priority_code %}
                                {{ call.priority_code.prefix.id }}-{{ call.priority_code.priority }}-{{
                                call.priority_code.suffix }}
                                {% endif %}
                            </td>
                            <td>{{ call.radio_code.id }}</td>
                            <td>{{ call.get_ambulances }}</td>
                        </tr>

                        {% endfor %}
                        </tbody>
                    </table>

                    {% else %}

                    <p>
                        {% trans "No calls currently started." %}
                    </p>

                    {% endif %}

                </div>
            </div>

            <h2>{% trans "Ended" %}</h2>

            {% if ended_list.has_other_pages %}
            <div class="row">
                <div class="col">
                    {% include "pagination/numbers.html" %}
                </div>
                <div class="col float-right">
                    {% include "pagination/sizes.html" %}
                </div>
            </div>
            {% endif %}

            <div class="row">
                <div class="col">

                    {% if ended_list %}

                    <table class="table table-striped table-sm">
                        <thead>
                        <tr>
                            <th>{% trans "Time" %}</th>
                            <th>{% trans "Details" %}</th>
                            <th>{% trans "Priority" %}</th>
                            <th>{% trans "Priority Code" %}</th>
                            <th>{% trans "Radio Code" %}</th>
                            <th>{% trans "Ambulances" %}</th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for call in ended_list %}
                        <tr>
                            <td><a href="{% url 'ambulance:call_detail' pk=call.id %}">{{ call.ended_at }}</a></td>
                            <td>{{ call.details }}</td>
                            <td>{{ call.priority }}</td>
                            <td>
                                {% if call.priority_code %}
                                {{ call.priority_code.prefix.id }}-{{ call.priority_code.priority }}-{{
                                call.priority_code.suffix }}
                                {% endif %}
                            </td>
                            <td>{{ call.radio_code.id }}</td>
                            <td>{{ call.get_ambulances }}</td>
                        </tr>

                        {% endfor %}
                        </tbody>
                    </table>

                    {% else %}

                    <p>
                        {% trans "No calls ended yet." %}
                    </p>

                    {% endif %}

                </div>
            </div>

            {% if ended_list.has_other_pages %}
            <div class="row">
                <div class="col">
                    {% include "pagination/numbers.html" %}
                </div>
                <div class="col float-right">
                    {% include "pagination/sizes.html" %}
                </div>
            </div>
            {% endif %}


        </div>

    </div>


</div>

{% endblock %}
