{% extends "base.html" %}
{% load static %}
{% load i18n %}
{% load render_bundle from webpack_loader %}

{% block content %}

<div class="container">

    <div class="row">
        <div class="col">

            <h1>{% trans "Vehicle Report" %}</h1>

            <h2>{% trans "Dates" %}</h2>
            <form action="{% url 'report:vehicle' %}" method="get">
                <div class="row">
                    <div class="col-1 text-right">
                        <span>{% trans "begin" %}:</span>
                    </div>
                    <div class="col-4">
                        <input type="date" name="beginDate" id="beginDate">
                    </div>
                    <div class="col-1 text-right">
                        <span>{% trans "end" %}:</span>
                    </div>
                    <div class="col-4">
                        <input type="date" name="endDate" id="endDate">
                    </div>
                    <div class="col-2">
                        <input id="submitButton" class="btn btn-primary"
                               type="submit" value="{% trans 'Generate Report' %}"
                               disabled>
                    </div>
                </div>
            </form>

            <h2>{% trans "Vehicles" %}</h2>

            <table class="table table-striped table-sm" id="vehiclesTable">
                <thead>
                    <tr>
                        <th>{% trans "Vehicle" %}</th>
                        <th>{% trans "Distance" %}</th>
                        <th>{% trans "Time" %}</th>
                        <th>{% trans "Avg Speed" %}</th>
                        <th>{% trans "Distance (moving)" %}</th>
                        <th>{% trans "Time (moving)" %}</th>
                        <th>{% trans "Avg Speed (moving)" %}</th>
                        <th>{% trans "Max Speed" %}</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>

        </div>
    </div>

    <div class="row">
        <div class="col">

            <h2>{% trans "Routes" %}:</h2>

            <div id="map" class="my-2" style="height: 600px"></div>

        </div>
    </div>

</div>

<div class="modal hide" id="pleaseWaitDialog" data-backdrop="static" data-keyboard="false">
    <div class="modal-header">
        <h1>Generating report...</h1>
    </div>
    <div class="modal-body">
        <div class="progress progress-striped active">
            <div class="bar" style="width: 100%;"></div>
        </div>
    </div>
</div>

{% endblock %}

{% block scripts %}

{% autoescape off %}
<script>
    const ambulance_status = {{ ambulance_status }};
    const location_type = {{ location_type }};
    const translation_table = {{ translation_table }};
</script>
{% endautoescape %}

{% render_bundle 'main' 'js' 'REPORT_VEHICLE' %}

{% endblock %}
